using System.Collections.Generic;
using System.Linq;
using MyRecipeStorage.Models;
using Newtonsoft.Json;

namespace MyRecipeStorage.Services
{
    public class RecipeServiceDummyStorage : IRecipeService
    {
        private readonly string _recipeJson;

        public RecipeServiceDummyStorage()
        {
            //_recipeJson = "[{ \"recipeguid\" : \"FC6F16C8-760E-4E4B-9BE0-33C1AF3248F1\", \"title\" : \"Italiensk pizzabunn\", \"subtitle\" : \"Tynn pizzabunn for Italiensk pizza\", \"description\" : \"Noe av den beste pizzabunn du kan lage. Hvis du synes det er en stor porsjon, så er det lettere å lage mye deig enn å minimere oppskriften.\n Bunnen du ikke steker, trykker du ut til flate pizzabunner og fryser. Legg 2 lag bakeark mellom hver pizza, så er det lett å ta opp bare deler av de nedfryste bunnene.\", \"mainimage\" : \"https://res.cloudinary.com/norgesgruppen/image/upload/c_fit%2Cf_auto%2Ch_453%2Cq_80%2Cw_604/zi5c1bxkokb4eos7roql.jpg\", \"references\" : [ { \"author\": \"Jan Vardøen\", \"desc\": \"Pizza Paradiso, hvordan lage verdens beste pizza.\", \"url\" : \"https://www.cappelendamm.no/_faktab%C3%B8ker/kokeb%C3%B8ker/pizza-paradiso-jan-vard%C3%B8en-9788202361310\" }, { \"author\": \"Meny.no\", \"desc\": \"Bildet hentet fra artikkelen PIZZA PÅ GRILLEN\", \"url\" : \"https://meny.no/Tema/Sommer/Pizza-pa-grillen/\" } ], \"numberofportions\" : 8, \"allowalteringnumberofportions\": false, \"difficulty\" : \"middels\", \"timeestimate\" : \"Mer enn 2 timer\", \"ingredients\" : [ { \"quantity\" : 6.0, \"unit\" : \"dl\", \"name\" : \"Vann\", \"desc\" : \"Lunket vann ca 25°C\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"dl\", \"name\" : \"Olivenolje\", \"desc\" : \"God olivenolje\", \"ean\" : \"\" }, { \"quantity\" : 3.0, \"unit\" : \"g\", \"name\" : \"Tørrgjær\", \"desc\" : \"Eller 1/4 pakke fersk gjær\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"ss\", \"name\" : \"Hvitt sukker\", \"desc\" : \"\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"kg\", \"name\" : \"Hvetemel\", \"desc\" : \"Siktet pizza/pasta mel tipo '00'\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"ss\", \"name\" : \"Salt\", \"desc\" : \"\", \"ean\" : \"\" } ], \"howtosteps\": [ { \"order\": 10, \"title\" : \"\", \"desc\" : \"Bland vann, olje og sukker sammen i en kjøkkenmaskin med eltekrok til det er godt blandet ca 3 min\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 20, \"title\" : \"\", \"desc\" : \"Ha i siktet hvetemel og salt og elt sammen på lav hastighet i ca 15 min. Du skal ha en glatt og elastisk deig.\n Hvis du merker at melet ikke blir blandet godt nok inn, stans maskinen, hent opp melet fra bunnen og vend det inn i deigen med hendene.\n Elt videre og tilsett litt vann dersom deigen er for hard og stiv.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 30, \"title\" : \"\", \"desc\" : \"La deigen hvile i 20 min.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 40, \"title\" : \"\", \"desc\" : \"Del deiger i 8 leiver på ca 200 gr hver.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 50, \"title\" : \"\", \"desc\" : \"Elt leivene lett mellom hendene, lag fine små baller og legg dem på 2 bakebrett med bakepapir. 4 bunner pr brett med god avstand. Smør/pensle bunnene med olivenolje for å hindre uttørring og dekk til med plastfolie.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 60, \"title\" : \"\", \"desc\" : \"La deigballene stå på brettene 2-5 timer i romtemperatur, til de har dobbelt størrelse.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 70, \"title\" : \"\", \"desc\" : \"Pizzadeigene er nå ferdig hevet, og oppbevares i kjøleskap til de skal brukes. De blir enda bedre dersom de står natten over i kjøleskap.\", \"imageurl\" : \"\", \"videourl\" : \"\" } ], \"categories\": [ { \"categoryname\": \"Pizza\" }, { \"categoryname\": \"Pizzabunn\" }, { \"categoryname\": \"Italiensk\" } ] }]";
            _recipeJson = "[{ \"recipeguid\" : \"FC6F16C8-760E-4E4B-9BE0-33C1AF3248F1\", \"title\" : \"Italiensk pizzabunn\", \"subtitle\" : \"Tynn pizzabunn for Italiensk pizza\", \"description\" : \"Noe av den beste pizzabunn du kan lage. Hvis du synes det er en stor porsjon, så er det lettere å lage mye deig enn å minimere oppskriften.\n Bunnen du ikke steker, trykker du ut til flate pizzabunner og fryser. Legg 2 lag bakeark mellom hver pizza, så er det lett å ta opp bare deler av de nedfryste bunnene.\", \"mainimage\" : \"https://res.cloudinary.com/norgesgruppen/image/upload/c_fit%2Cf_auto%2Ch_453%2Cq_80%2Cw_604/zi5c1bxkokb4eos7roql.jpg\", \"references\" : [ { \"author\": \"Jan Vardøen\", \"desc\": \"Pizza Paradiso, hvordan lage verdens beste pizza.\", \"url\" : \"https://www.cappelendamm.no/_faktab%C3%B8ker/kokeb%C3%B8ker/pizza-paradiso-jan-vard%C3%B8en-9788202361310\" }, { \"author\": \"Meny.no\", \"desc\": \"Bildet hentet fra artikkelen PIZZA PÅ GRILLEN\", \"url\" : \"https://meny.no/Tema/Sommer/Pizza-pa-grillen/\" } ], \"numberofportions\" : 8, \"allowalteringnumberofportions\": false, \"difficulty\" : \"middels\", \"timeestimate\" : \"Mer enn 2 timer\", \"ingredients\" : [ { \"quantity\" : 6.0, \"unit\" : \"dl\", \"name\" : \"Vann\", \"desc\" : \"Lunket vann ca 25°C\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"dl\", \"name\" : \"Olivenolje\", \"desc\" : \"God olivenolje\", \"ean\" : \"\" }, { \"quantity\" : 3.0, \"unit\" : \"g\", \"name\" : \"Tørrgjær\", \"desc\" : \"Eller 1/4 pakke fersk gjær\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"ss\", \"name\" : \"Hvitt sukker\", \"desc\" : \"\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"kg\", \"name\" : \"Hvetemel\", \"desc\" : \"Siktet pizza/pasta mel tipo '00'\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"ss\", \"name\" : \"Salt\", \"desc\" : \"\", \"ean\" : \"\" } ], \"howtosteps\": [ { \"order\": 10, \"title\" : \"\", \"desc\" : \"Bland vann, olje, gjær og sukker sammen i en kjøkkenmaskin med eltekrok til det er godt blandet ca 3 min\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 20, \"title\" : \"\", \"desc\" : \"Ha i siktet hvetemel og salt og elt sammen på lav hastighet i ca 15 min. Du skal ha en glatt og elastisk deig.\n Hvis du merker at melet ikke blir blandet godt nok inn, stans maskinen, hent opp melet fra bunnen og vend det inn i deigen med hendene.\n Elt videre og tilsett litt vann dersom deigen er for hard og stiv.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 30, \"title\" : \"\", \"desc\" : \"La deigen hvile i 20 min.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 40, \"title\" : \"\", \"desc\" : \"Del deiger i 8 leiver på ca 200 gr hver.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 50, \"title\" : \"\", \"desc\" : \"Elt leivene lett mellom hendene, lag fine små baller og legg dem på 2 bakebrett med bakepapir. 4 bunner pr brett med god avstand. Smør/pensle bunnene med olivenolje for å hindre uttørring og dekk til med plastfolie.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 60, \"title\" : \"\", \"desc\" : \"La deigballene stå på brettene 2-5 timer i romtemperatur, til de har dobbelt størrelse.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 70, \"title\" : \"\", \"desc\" : \"Pizzadeigene er nå ferdig hevet, og oppbevares i kjøleskap til de skal brukes. De blir enda bedre dersom de står natten over i kjøleskap.\", \"imageurl\" : \"\", \"videourl\" : \"\" } ], \"categories\": [ { \"categoryname\": \"Pizza\" }, { \"categoryname\": \"Pizzabunn\" }, { \"categoryname\": \"Italiensk\" } ]},{ \"recipeguid\" : \"CD7E2FE0-4FDB-434E-BC60-A23845E78EAA\", \"title\" : \"Amerikansk langpanne pizzabunn\", \"subtitle\" : \"Tykk langpanne pizzabunn for Amerikansk pizza\", \"description\" : \"Passer til 1 langpanne\", \"mainimage\" : \"http://images.matprat.no/24ht582q7u-jumbotron/large\", \"references\" : [ { \"author\": \"Matprat.no\", \"desc\": \"Langpannepizza\", \"url\" : \"http://www.matprat.no/oppskrifter/kos/langpannepizza/\" } ], \"numberofportions\" : 4, \"allowalteringnumberofportions\": false, \"difficulty\" : \"middels\", \"timeestimate\" : \"Mer enn 2 timer\", \"ingredients\" : [ { \"quantity\" : 3.0, \"unit\" : \"dl\", \"name\" : \"Vann\", \"desc\" : \"Lunket vann ca 25°C\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"ss\", \"name\" : \"Smør\", \"desc\" : \"Smeltet smør\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"pk\", \"name\" : \"Tørrgjær\", \"desc\" : \"\", \"ean\" : \"\" }, { \"quantity\" : 400.0, \"unit\" : \"g\", \"name\" : \"Hvetemel\", \"desc\" : \"Siktet hvetemel\", \"ean\" : \"\" }, { \"quantity\" : 1.0, \"unit\" : \"ts\", \"name\" : \"Salt\", \"desc\" : \"\", \"ean\" : \"\" } ], \"howtosteps\": [ { \"order\": 10, \"title\" : \"\", \"desc\" : \"Bland vann og smeltet smør sammen. Blandingen må varmes/avkjøles til ca 35°C. (Må ikke overstige 40°C)\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 20, \"title\" : \"\", \"desc\" : \"Bland inn Gjæren.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 30, \"title\" : \"\", \"desc\" : \"Bland inn hvetemel og salt.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 40, \"title\" : \"\", \"desc\" : \"Elt deigen til den er fin å arbeide med.\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 50, \"title\" : \"\", \"desc\" : \"La deigen heve i ca 20min (dekk til med kjøkkenhandkle eller plastfolie).\", \"imageurl\" : \"\", \"videourl\" : \"\" }, { \"order\": 60, \"title\" : \"\", \"desc\" : \"Stekes ca 20min med over/undervarne på 200°C, nederste rille\", \"imageurl\" : \"\", \"videourl\" : \"\" } ], \"categories\": [ { \"categoryname\": \"Pizza\" }, { \"categoryname\": \"Pizzabunn\" }, { \"categoryname\": \"Amerikansk\" }, { \"categoryname\": \"Lørdagspizza\" } ]}]";
        }

        public IEnumerable<RecipeMin> SearchForRecipes(string q, string category)
        {
            var recipes = JsonConvert.DeserializeObject<List<RecipeMin>>(_recipeJson);
            return recipes;
        }

        public Recipe GetRecipe(string id)
        {
            var recipes = JsonConvert.DeserializeObject<List<Recipe>>(_recipeJson);


            var recipe = recipes.SingleOrDefault(o => o.RecipeGuid == id);
            return recipe;


        }
    }
}
